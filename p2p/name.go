// Copyright Â© 2022-2024 Obol Labs Inc. Licensed under the terms of a Business Source License 1.1

package p2p

import (
	"fmt"

	"github.com/libp2p/go-libp2p/core/peer"
)

var (
	// list of 144 nouns.
	nouns = []string{
		"adult",
		"age",
		"amount",
		"area",
		"back",
		"bed",
		"blood",
		"body",
		"book",
		"box",
		"boy",
		"bulb",
		"bunch",
		"business",
		"camera",
		"chicken",
		"child",
		"chocolates",
		"city",
		"clothes",
		"colony",
		"colors",
		"company",
		"computer",
		"continent",
		"council",
		"country",
		"course",
		"cycle",
		"dates",
		"day",
		"death",
		"desk",
		"door",
		"egg",
		"face",
		"fact",
		"factory",
		"family",
		"farm",
		"farmer",
		"father",
		"fish",
		"floor",
		"flowers",
		"food",
		"fridge",
		"future",
		"game",
		"garden",
		"gas",
		"glass",
		"group",
		"health",
		"hill",
		"hospital",
		"idea",
		"image",
		"industry",
		"island",
		"jewelry",
		"job",
		"kitchen",
		"land",
		"law",
		"leaves",
		"leg",
		"letter",
		"life",
		"magazine",
		"market",
		"metal",
		"mirror",
		"mobile",
		"money",
		"morning",
		"mother",
		"mountain",
		"movie",
		"name",
		"nest",
		"news",
		"ocean",
		"oil",
		"painter",
		"park",
		"party",
		"pen",
		"pen",
		"pencil",
		"person",
		"picture",
		"pillow",
		"place",
		"plant",
		"pond",
		"rain",
		"rate",
		"result",
		"ring",
		"road",
		"rock",
		"rocket",
		"room",
		"rope",
		"rule",
		"sale",
		"school",
		"shape",
		"shapes",
		"ship",
		"shop",
		"sister",
		"site",
		"skin",
		"snacks",
		"son",
		"song",
		"sort",
		"sound",
		"soup",
		"sports",
		"state",
		"stone",
		"street",
		"system",
		"taxi",
		"tea",
		"teacher",
		"team",
		"toy",
		"tractor",
		"trade",
		"train",
		"video",
		"view",
		"water",
		"waterfall",
		"week",
		"women",
		"wood",
		"word",
		"year",
		"yesterday",
	}

	// list of 196 adjectives.
	adjectives = []string{
		"adorable",
		"adventurous",
		"affectionate",
		"aggressive",
		"agreeable",
		"alert",
		"alive",
		"amazing",
		"amiable",
		"ample",
		"amused",
		"angry",
		"annoyed",
		"anxious",
		"ashamed",
		"attractive",
		"average",
		"beautiful",
		"better",
		"bewildered",
		"black",
		"blushing",
		"bored",
		"bountiful",
		"brainy",
		"brave",
		"bright",
		"busy",
		"calm",
		"captivating",
		"careful",
		"cautious",
		"charming",
		"cheerful",
		"clear",
		"clever",
		"cloudy",
		"colorful",
		"combative",
		"comfortable",
		"confused",
		"considerate",
		"cooperative",
		"courageous",
		"crazy",
		"crowded",
		"cruel",
		"curious",
		"cute",
		"dangerous",
		"dark",
		"defiant",
		"dazzling",
		"delightful",
		"determined",
		"different",
		"distinct",
		"eager",
		"easy",
		"elated",
		"elegant",
		"embarrassed",
		"enchanting",
		"encouraging",
		"energetic",
		"engaging",
		"engrossing",
		"enthusiastic",
		"excited",
		"expensive",
		"exuberant",
		"fabulous",
		"fair",
		"faithful",
		"famous",
		"fancy",
		"fantastic",
		"favorable",
		"fearless",
		"fierce",
		"fine",
		"foolish",
		"fragile",
		"frank",
		"frantic",
		"friendly",
		"funny",
		"gentle",
		"gifted",
		"glamorous",
		"gleaming",
		"glittering",
		"glorious",
		"good",
		"gorgeous",
		"graceful",
		"gregarious",
		"grotesque",
		"handsome",
		"happy",
		"healthy",
		"helpful",
		"helpless",
		"hilarious",
		"homely",
		"hungry",
		"hurt",
		"imaginative",
		"important",
		"impossible",
		"incredible",
		"inexpensive",
		"innocent",
		"inquisitive",
		"jealous",
		"jittery",
		"jolly",
		"joyous",
		"kind",
		"lazy",
		"light",
		"lively",
		"long",
		"lovely",
		"lucky",
		"magnificent",
		"mindful",
		"misty",
		"modern",
		"motionless",
		"muddy",
		"mysterious",
		"nervous",
		"nice",
		"obedient",
		"odd",
		"open",
		"optimistic",
		"outrageous",
		"outstanding",
		"perfect",
		"plain",
		"pleasant",
		"poised",
		"powerful",
		"precious",
		"prickly",
		"proud",
		"puzzled",
		"quaint",
		"ravishing",
		"real",
		"relieved",
		"reliable",
		"remarkable",
		"rich",
		"scary",
		"selfish",
		"shiny",
		"shy",
		"sleepy",
		"smiling",
		"sore",
		"sparkling",
		"spectacular",
		"splendid",
		"spotless",
		"stormy",
		"strange",
		"successful",
		"super",
		"talented",
		"tasty",
		"tender",
		"tense",
		"thankful",
		"thoughtful",
		"tired",
		"tough",
		"twinkling",
		"unique",
		"unsightly",
		"unusual",
		"vast",
		"vibrant",
		"victorious",
		"vivacious",
		"wandering",
		"wild",
		"wise",
		"witty",
		"wondrous",
		"worried",
		"wrong",
		"zany",
		"zealous",
	}
)

// PeerName returns a deterministic pseudo random human friendly name for the peer ID.
func PeerName(id peer.ID) string {
	// p is chosen to be 59 because it's prime and roughly equal to the no of different characters
	// you can have in base58 encoded strings. Base58 encoded strings can consist of 58 different
	// alphanumeric characters (123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz)
	var (
		hashValue uint64
		pPow      uint64 = 1
		p         uint64 = 59
		m         uint64 = 1e9 + 7
	)

	// s is the base58-encoded representation of peerID
	s := id.String()
	for _, c := range s {
		tmp := uint64(c) * pPow
		hashValue = (hashValue + tmp) % m
		pPow = (pPow * p) % m
	}

	nounIdx := hashValue % uint64(len(nouns))
	adjIdx := hashValue % uint64(len(adjectives))

	return fmt.Sprintf("%s-%s", adjectives[adjIdx], nouns[nounIdx])
}
